<template>
  <div class="box-border container mx-auto py-4 px-2">
    <div class="w-full md:flex gap-16 mt-6">
      <div class="md:w-2/3">
        <div>
          <h1 class="text-2xl font-normal text-black">Checkout</h1>
          <div class="mt-10">
            <h2 class="text-xl">Shipping Information</h2>
            <hr class="mt-2" />
          </div>
        </div>

        <h3 class="mt-6">Use saved address</h3>

        <div>
          <div class="md:flex justify-between gap-8 mt-4">
            <div class="md:md:w-1/2">
              <div class="flex">
                <div>
                  <input
                    id="primary-address"
                    v-model.trim="SelectedAddress"
                    type="radio"
                    value="Primary address"
                    name="radio"
                    class="mr-2 form-check-input appearance-none rounded-full h-4 w-4 border border-primary-blue bg-white checked:bg-primary-blue checked:border-primary-blue focus:outline-none transition duration-200 my-1 align-top bg-no-repeat bg-center bg-contain float-left cursor-pointer"
                  />
                </div>
                <label for="primary-address"> Primary address</label>
              </div>
            </div>
          </div>

          <div class="mt-2" >
			  <button @click="openModal">Or ship to new address</button>
            <new-address-modal v-model="modalOpen"> </new-address-modal> 
          </div>

          <!-- <form action="" @submit.prevent="saveAddress">
            <div class="md:flex justify-between gap-8">
              <div class="mt-4 md:w-1/2">
                <div>
                  <label for="shop-name" class="block mb-2 text-sm font-medium"
                    >Street Address</label
                  >
                  <input
                    id="street-address"
                    v-model.trim="streetAddress"
                    type="text"
                    name="street-address"
                    class="border border-gray-200 text-sm focus:outline-primary-blue block w-full p-2.5"
                  />
                </div>
              </div>
              <div class="mt-4 md:w-1/2">
                <div>
                  <label for="shop-name" class="block mb-2 text-sm font-medium"
                    >City / LGA</label
                  >
                  <input
                    id="city-lga"
                    v-model="cityLga"
                    type="text"
                    name="city-lga"
                    class="border border-gray-200 text-sm focus:outline-primary-blue block w-full p-2.5"
                  />
                </div>
              </div>
            </div>
            <div class="md:flex justify-between gap-8">
              <div class="mt-4 md:w-1/2">
                <div>
                  <label for="shop-name" class="block mb-2 text-sm font-medium"
                    >State</label
                  >
                  <input
                    id="state"
                    v-model.trim="state"
                    type="text"
                    name="state"
                    class="border border-gray-200 t text-sm focus:outline-primary-blue block w-full p-2.5"
                  />
                </div>
              </div>
              <div class="mt-4 md:w-1/2">
                <div>
                  <label for="shop-name" class="block mb-2 text-sm font-medium"
                    >Zip / postal code</label
                  >
                  <input
                    id="zip-postal-code"
                    v-model.trim="zipPostalCode"
                    type="text"
                    name="zip-postal-code"
                    class="border border-gray-200 text-sm focus:outline-primary-blue block w-full p-2.5"
                  />
                </div>
                <div class="flex justify-end items-end mt-4">
                  
                  <app-button
                    size="small"
                    variant="outlined"
                    color="success"
                    type="submit"
                  >
                    Save
                  </app-button>
                </div>
              </div>
            </div>
          </form> -->
          <div class="md:mt-10">
            <div class="mt-10">
              <h2 class="text-xl">Payment</h2>
              <hr class="mt-2" />
            </div>
            <section>
              <div class="flex justify-between items-center mt-6">
                <span>Subtotal</span>
                <span>NGN {{totalPrice * 500}}</span>
              </div>
              <div class="mt-6 flex justify-between border-b pb-2">
                <p class="">Shipping Method</p>
                <select name="" id="" class="" v-model="shippingFee">
                  <option value="500">Standard Shipping ₦500</option>
                  <option value="1000">Fast Shipping ₦1000</option>
                </select>
              </div>
              <div class="flex justify-between items-center mt-6">
                <span class="font-semibold">Total</span>
                <span class="text-primary-blue font-medium"> NGN {{sumTotal}}</span>
              </div>
              <div class="mt-8 flex justify-center">
                <app-button 
                  @click.prevent="initializePaystack"
                  type="submit"
                  size="medium"
                  variant="contained"
                  color="success"
                  >Proceed To Make Payment</app-button
                >
                <!-- <router-link to="/login" class="btn btn-dark mt-5" v-else
                  >Login to CheckOut</router-link
                >  -->
              </div>
            </section>

            <!-- <section>
              <form @submit.prevent="initializePaystack">
                <div class="md:flex justify-between gap-8">
                  <div class="mt-4 md:w-1/2">
                    <div>
                      <label
                        for="shop-name"
                        class="block mb-2 text-sm font-medium"
                        >Email</label
                      >
                      <input
                        id="state"
                        v-model.trim="email"
                        type="text"
                        name="email"
                        class="border border-gray-200 t text-sm focus:outline-primary-blue block w-full p-2.5"
                      />
                    </div>
                  </div>
                  <div class="mt-4 md:w-1/2">
                    <div>
                      <label for="amount" class="block mb-2 text-sm font-medium"
                        >Amount</label
                      >
                      <input
                        id="zip-postal-code"
                        v-model.trim="amount"
                        type="text"
                        name="amount"
                        class="border border-gray-200 text-sm focus:outline-primary-blue block w-full p-2.5"
                      />
                    </div>
                    <div class="mt-10">
                      <app-button
                        type="submit"
                        size="medium"
                        variant="contained"
                        color="success"
                        >Make Payment</app-button
                      >
                    </div>

                    
                  </div>
                </div>
              </form>
            </section> -->
          </div>
        </div>
      </div>
      <!-- <div class="md:w-1/3">
        <ContentsOrderSummary />
      </div> -->
    </div>
  </div>
</template>

<script>
import { mapGetters } from "vuex";

import NewAddressModal from '~/components/newAddressModal.vue';
export default {
  components: {NewAddressModal},
  data() {
    return {
      email: "",
      amount: "",
      props: [],
      SelectedAddress: "",
      modalOpen: false,
      shippingFee: ''
	//   streetAddress: "",
    //   cityLga: "",
    //   state: "",
    //   zipPostalCode: "",
    };
  },
  computed: {
     ...mapGetters({
      cart: "cart/cartProducts",
      totalPrice: "cart/cartTotalPrice",
      itemsCount: "cart/cartItemsCount",
    }),
    sumTotal() {
      return (this.totalPrice + this.shippingFee) * 500
    },
    reference() {
      let text = "";
      let possible =
        "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

      for (let i = 0; i < 10; i++)
        text += possible.charAt(Math.floor(Math.random() * possible.length));

      return text;
    },
  },
  methods: {
    saveAddress() {
      console.log();
    },
	openModal(){
		this.modalOpen = !this.modalOpen;
	},
    initializePaystack() {
      this.$paystack({
        key: "pk_test_1439df5ec859471cd4e3d8405a5b7dea45667b48", // Replace with your public key.
        email: 'jamiu@youverify.co',
        amount: Math.floor(this.sumTotal),
        ref: "",
        currency: "NGN",
        callback: () => {
          // Do something.
          console.log(response);
        },
        onClose: () => {
          // Do something.

          console.log("Payment Closed");
        },
      });
    },
  },
};
</script>

<style></style>
